!function(e){var n=e(".navigation-default"),t="mega-menu-ajax-",a={ajaxLoadingContainer:"navigation-ajax-container",ajaxLoadComplete:"ajax-load-complete",ddcIcon:"ddc-icon",ddcIconSize:"ddc-icon-size-xlarge",ddcIconGear:"ddc-icon-specs-gear1",hide:"hide",loading:"loading",open:"open"},d={ddcContent:".ddc-content",ddcMegaMenuNav:".ddc-mega-menu-nav.nav",ajaxLoadComplete:".ajax-load-complete",loading:".loading"},o={ajaxComplete:"ddc-mega-menu-nav-ajax-load-complete"},i={linkIsDdc404:/404.html$/},r=function(n){e(document).trigger("modulesRefresh",{modules:{lazyImage:DDC.modules.lazyImage}}),n.siblings(".dropdown-menu").find('div.ajax-navigation-element:not([data-fragment-url=""])').not(d.ajaxLoadComplete).each(function(){var n=e(this),t=650,r=(new Date).getTime(),u=n.data("fragment-url"),g=n.data("fragment-id"),h=DDC.i18n.getLabel("LOADING");i.linkIsDdc404.test(u)||(!l(g)&&c(g)?(n.html(u).removeClass(a.hide).html(s(g)),m(1,1),n.css("visibility","visible").addClass(a.ajaxLoadComplete),e(document).trigger("modulesRefresh"),m(2,500),$thisLoad.find(d.ddcContent).first().trigger(o.ajaxComplete)):(n.not(d.ajaxLoadComplete).before('<span class="'+a.ajaxLoadingContainer+" "+a.loading+'"><i class="'+a.ddcIcon+" "+a.ddcIconGear+" "+a.ddcIconSize+'"></i> '+h+"</span>"),n.html("").removeClass(a.hide).load(u,function(){m(1,1);var n=e(this),a=(new Date).getTime()-r;t=a>t?0:t-a,n.delay(t).queue(function(){e(this).css("visibility","visible").siblings(d.loading).remove(),e(document).trigger("modulesRefresh")}),n.find(d.ddcContent).first().trigger(o.ajaxComplete),m(3,500)}).addClass(a.ajaxLoadComplete)))})},s=function(e){return localStorage.getItem(t+e)},l=function(){return!0},c=function(){return!1},u=function(n){e(".dropdown.dropdown").each(function(){var t=e(this);if(t.hasClass(a.open)||n){var d=t.find(".dropdown-menu > li");d.css({minHeight:"",height:""});var o=t.find(".dropdown-menu").height();d.css({minHeight:o,height:"auto"})}})},m=function(e,n){function t(){return o>=e?void a():(u(!1),void o++)}function a(){clearInterval(d)}var d=setInterval(function(){t()},n),o=0},g=function(){var t=n.find("[data-dropdown-display-type]").attr("data-dropdown-display-type"),a="click";t.length>0&&(a=t),"hover"==a&&(n.find(d.ddcMegaMenuNav).find("li.dropdown").hover(function(){jQuery(this).has(".dropdown-menu").length>0&&(jQuery(this).siblings().removeClass("open"),jQuery(this).addClass("open").trigger("show.bs.dropdown"))},function(){jQuery(this).has(".dropdown-menu").length>0&&jQuery(this).removeClass("open").trigger("hidden.bs.dropdown")}),n.find(d.ddcMegaMenuNav).find("li.dropdown ul.dropdown-menu").hover(function(){},function(){jQuery(this).parent("li").removeClass("open").trigger("hidden.bs.dropdown")})),n.find(".dropdown").on("show.bs.dropdown",function(){var n=e(this).find(".nav-with-children");n.length>0&&(r(n),e(document).trigger("trackEvent",[{widgetName:"mega-menu",eventName:"click",data:n.text().trim()}]))}),n.find(".dropdown-menu").on(a,function(n){var t,a,d=e(n.target),o=d.parents("[data-widget-name]"),i=o.data("widget-name"),r=null;d.is(".media img")&&"inventory-featured-default"===i&&"ontouchstart"in document.documentElement?(n.preventDefault(),n.stopPropagation(),o.find(".hover-state").removeClass("hover-state"),e(this).closest(".hproduct > div").addClass("hover-state")):d.is("a")||d.parent("a").length>0||d.parent().hasClass("inventory-count-link")?(t="model-selector-default"===i?d.parents(".hproduct").find("a").text():d.text(),a=e.trim(i+"|"+t.replace(/\s/g," ")),("inventory-featured-default"===i||"model-selector-default"===i)&&(r=parseInt(o.find(".hproduct").length,10)),e(document).trigger("trackEvent",[{widgetName:"mega-menu",eventName:"click",data:a,value:r}])):"submit"!=e(n.target).attr("type")&&n.stopPropagation()})};e(document).ready(function(){g(),u(!0)})}(jQuery);