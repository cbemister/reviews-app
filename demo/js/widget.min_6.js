!function(){var t=$("#ddc-clickmap-img-click"),i=("true"===DDC.getUrlParams()._debugClickmap,window.DDC.client.isMobile?0:1),e={click:0===i?"tap.ddclickmap":"mousedown.ddclickmap"},a={content:"[data-page-body]"},o=$(window),d=function(){return window.DDC&&window.DDC.Widgets&&window.DDC.Widgets.DDCClickmap&&window.DDC.Widgets.DDCClickmap.url&&""!==window.DDC.Widgets.DDCClickmap.url},s=function(t,e){if(d()){var o=$(a.content);if(0!=o.size()){var s,r,c=o.width(),l=o.offset().left,g=o.offset().top,p="{clickmapUrl}/click.gif?siteid={siteId}&type={type}&alias={alias}&widgetid={widgetId}&x={x}&y={y}&width={width}&height={height}",h=0,f=0,w=function(t){var i,e=$(t.target).closest("[data-widget-id]");return e.length>0&&e.attr("data-widget-id")?i=e.attr("data-widget-id"):0===e.length&&$(t.target).closest("#ddc-slidein-panel-primary-navigation").size()>0?(e=$(t.target).closest("#ddc-slidein-panel-primary-navigation"),i="template-navigation1"):i="pageV2",{widget:e,widgetId:i}},u=w(t),D=function(t,i){var e=void 0!==i&&void 0!==i.x?i.x:t.originalEvent.pageX,a=void 0!==i&&void 0!==i.y?i.y:t.originalEvent.pageY;return(void 0===e||void 0===a)&&(e=t.pageX,a=t.pageY),{x:e,y:a}},m=D(t,e);if(u.widget.length>0){var v=u.widget.outerWidth(),y=u.widget.outerHeight(),k=Math.floor(u.widget.offset().top),C=Math.floor(u.widget.offset().left);h=Math.floor(m.x-C),f=Math.floor(m.y-k),s=Math.floor(v),r=Math.floor(y)}else h=Math.floor(m.x-l-c/2),f=Math.floor(m.y-g),s=c,r=0;var I=p.replace("{clickmapUrl}",window.DDC.Widgets.DDCClickmap.url).replace("{siteId}",window.DDC.siteSettings.siteId).replace("{type}",i).replace("{alias}",window.DDC.siteSettings.pageAlias).replace("{widgetId}",u.widgetId).replace("{x}",h).replace("{y}",f).replace("{width}",s).replace("{height}",r);n.add(I)}}},n={ready:!1,store:sessionStorage||{getItem:$.noop,setItem:$.noop},storageKey:"ddc-clickmap-queue",load:function(){var t=this.store.getItem(this.storageKey);return t?t.split(","):[]},save:function(){this.store.setItem(this.storageKey,this.items.join(","))},add:function(t){t&&(this.items.push(t),this.process())},process:function(){if(this.ready)for(;this.items.length>0;){var i=this.items[0];if(i&&t.attr("src")!==i)return this.ready=!1,void t.attr("src",i);this.items.shift()}},kick:function(){this.ready=!0,this.process()},init:function(){this.items=this.load();var i=this;o.on("load",function(){i.kick()}),t.on("load",function(){i.kick()}),o.unload(function(){i.save()})}};n.init(),$("body").on(e.click,function(t,i){s(t,i)})}();